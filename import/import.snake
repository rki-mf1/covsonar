from Bio import SeqIO
from pathlib import Path

def get_diff_fname(path):
	elems = os.path.normpath(path).split(os.sep)
	return os.path.join(config['diff_dir'], elems[-2], os.path.splitext(elems[-1])[0] + ".diff")

def input_all(wildcards):
	return [ get_diff_fname(x) for x in Path(config['seq_dir']).rglob("*.aseq") ]

rule all:
	input:
		input_all

include: "rules/align.smk"
include: "rules/diff.smk"
